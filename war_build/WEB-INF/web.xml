<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="https://jakarta.ee/xml/ns/jakartaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee
                             https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd"
         version="5.0">

    <!-- Application name and description -->
    <display-name>MazeBank Online Banking System</display-name>
    <description>RESTful backend API for MazeBank banking operations</description>

    <!-- Session timeout in minutes -->
    <session-config>
        <cookie-config>
            <http-only>true</http-only>
            <secure>false</secure>
        </cookie-config>
        <tracking-mode>COOKIE</tracking-mode>
    </session-config>

    <!-- Login Servlet - Authentication -->
    <servlet>
        <servlet-name>LoginServlet</servlet-name>
        <servlet-class>com.mazebank.servlet.LoginServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>LoginServlet</servlet-name>
        <url-pattern>/api/login</url-pattern>
    </servlet-mapping>

    <!-- Registration Servlet - User Registration -->
    <servlet>
        <servlet-name>RegistrationServlet</servlet-name>
        <servlet-class>com.mazebank.servlet.RegistrationServlet</servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>RegistrationServlet</servlet-name>
        <url-pattern>/api/register</url-pattern>
    </servlet-mapping>

    <!-- Logout Servlet - Session termination -->
    <servlet>
        <servlet-name>LogoutServlet</servlet-name>
        <servlet-class>com.mazebank.servlet.LogoutServlet</servlet-class>
        <load-on-startup>3</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>LogoutServlet</servlet-name>
        <url-pattern>/api/logout</url-pattern>
    </servlet-mapping>

    <!-- Session Servlet - Session validation and profile -->
    <servlet>
        <servlet-name>SessionServlet</servlet-name>
        <servlet-class>com.mazebank.servlet.SessionServlet</servlet-class>
        <load-on-startup>4</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>SessionServlet</servlet-name>
        <url-pattern>/api/session</url-pattern>
    </servlet-mapping>

    <!-- Account Servlet - Account operations -->
    <servlet>
        <servlet-name>AccountServlet</servlet-name>
        <servlet-class>com.mazebank.servlet.AccountServlet</servlet-class>
        <load-on-startup>5</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>AccountServlet</servlet-name>
        <url-pattern>/api/account</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>AccountServlet</servlet-name>
        <url-pattern>/api/account/*</url-pattern>
    </servlet-mapping>

    <!-- Transaction Servlet - Fund transfers and history -->
    <servlet>
        <servlet-name>TransactionServlet</servlet-name>
        <servlet-class>com.mazebank.servlet.TransactionServlet</servlet-class>
        <load-on-startup>6</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>TransactionServlet</servlet-name>
        <url-pattern>/api/transfer</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>TransactionServlet</servlet-name>
        <url-pattern>/api/transactions</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>TransactionServlet</servlet-name>
        <url-pattern>/api/transactions/*</url-pattern>
    </servlet-mapping>

    <!-- Deposit Servlet - Deposit operations -->
    <servlet>
        <servlet-name>DepositServlet</servlet-name>
        <servlet-class>com.mazebank.servlet.DepositServlet</servlet-class>
        <load-on-startup>7</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>DepositServlet</servlet-name>
        <url-pattern>/api/deposit</url-pattern>
    </servlet-mapping>

    <!-- Withdraw Servlet - Withdrawal operations -->
    <servlet>
        <servlet-name>WithdrawServlet</servlet-name>
        <servlet-class>com.mazebank.servlet.WithdrawServlet</servlet-class>
        <load-on-startup>8</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>WithdrawServlet</servlet-name>
        <url-pattern>/api/withdraw</url-pattern>
    </servlet-mapping>

    <!-- Error pages -->
    <error-page>
        <error-code>404</error-code>
        <location>/error/404.html</location>
    </error-page>
    <error-page>
        <error-code>500</error-code>
        <location>/error/500.html</location>
    </error-page>

</web-app>
